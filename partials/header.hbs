{{!--
This header template is shared across all the pages.
--}}

<header class="m-header {{#if background}}with-picture{{/if}} js-header">
  <div class="m-mobile-topbar" data-aos="fade-down">
    <button class="m-icon-button in-mobile-topbar js-open-menu" aria-label="{{t "Open menu"}}">
      <span class="icon-menu" aria-hidden="true"></span>
    </button>
    {{#if @site.logo}}
      <a href="{{@site.url}}" class="m-logo in-mobile-topbar">
        <img src="{{@site.logo}}" alt="{{@site.title}}" class="{{#if @custom.dark_mode_logo}}m-logo__image-light{{/if}}">
        {{#if @custom.dark_mode_logo}}
          <img src="{{@custom.dark_mode_logo}}" alt="{{@site.title}}" class="m-logo__image-dark">
        {{/if}}
      </a>
    {{else}}
      <a href="{{@site.url}}" class="m-site-name in-mobile-topbar">
        {{@site.title}}
      </a>
    {{/if}}
    <button class="m-icon-button in-mobile-topbar js-open-search" aria-label="{{t "Open search"}}">
      <span class="icon-search" aria-hidden="true"></span>
    </button>
  </div>

  <div class="m-menu js-menu">
    <button class="m-icon-button outlined as-close-menu js-close-menu" aria-label="{{t "Close menu"}}">
      <span class="icon-close"></span>
    </button>
    <div class="m-menu__main" data-aos="fade-down">
      <div class="l-wrapper">
        <div class="m-nav js-main-nav">
          <nav class="m-nav__left js-main-nav-left" role="navigation" aria-label="{{t "Main menu"}}">
            <ul>
              <li>
                <a href="https://creatorsgarten.org/ring" title="Creatorsgarten Webring">
                  <svg width="24" height="24" viewBox="0 0 416 416" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="103" cy="103" r="78" stroke="#a22d46" fill="#a82d46" stroke-width="20"></circle>
                    <rect x="235" y="235" width="156" height="156" stroke="#a82d46" fill="#a82d46" stroke-width="20"></rect>
                    <mask id="path-3-inside-1_201_11" fill="#a82d46">
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M400 190C400 93.9025 322.098 16 226 16L226 190L400 190Z"></path>
                    </mask>
                    <path d="M226 16L226 -2.00001L208 -2.00001L208 16L226 16ZM400 190L400 208L418 208L418 190L400 190ZM226 190L208 190L208 208L226 208L226 190ZM226 34C312.156 34 382 103.844 382 190L418 190C418 83.9613 332.039 -2 226 -2.00001L226 34ZM244 190L244 16L208 16L208 190L244 190ZM400 172L226 172L226 208L400 208L400 172Z" fill="#a82d46" mask="url(#path-3-inside-1_201_11)"></path>
                    <mask id="path-5-inside-2_201_11" fill="#a82d46">
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M16 226C16 322.098 93.9025 400 190 400L190 226L16 226Z"></path>
                    </mask>
                    <path d="M190 400L190 418L208 418L208 400L190 400ZM16 226L16 208L-2 208L-2 226L16 226ZM190 226L208 226L208 208L190 208L190 226ZM190 382C103.844 382 34 312.156 34 226L-2 226C-2 332.039 83.9613 418 190 418L190 382ZM172 226L172 400L208 400L208 226L172 226ZM16 244L190 244L190 208L16 208L16 244Z" fill="#a82d46" mask="url(#path-5-inside-2_201_11)"></path>
                  </svg>
                </a>
                <a href="https://webring.wonderful.software#mikkipastel.com" title="วงแหวนเว็บ">
                  <img
                    alt="วงแหวนเว็บ"
                    width="24"
                    height="24"
                    src="https://webring.wonderful.software/webring.svg"
                  />
                </a>
              </li>
              {{#if @site.logo}}
                <li class="only-desktop">
                  <a href="{{@site.url}}" class="m-logo">
                    <img src="{{@site.logo}}" alt="{{@site.title}}" class="{{#if @custom.dark_mode_logo}}m-logo__image-light{{/if}}">
                    {{#if @custom.dark_mode_logo}}
                      <img src="{{@custom.dark_mode_logo}}" alt="{{@site.title}}" class="m-logo__image-dark">
                    {{/if}}
                  </a>
                </li>
                {{else}}
                <li class="only-desktop">
                  <a href="{{@site.url}}" class="m-site-name in-desktop-menu">
                    {{@site.title}}
                  </a>
                </li>
              {{/if}}
              {{#if @site.navigation}}
                {{navigation}}
              {{/if}}
              {{#if @site.secondary_navigation}}
                <li class="more">
                  <span>
                    <a href="javascript:void(0);" class="js-open-secondary-menu">
                      {{t "More"}}
                      <span class="icon-chevron-down" aria-hidden="true"></span>
                    </a>
                  </span>
                </li>
              {{/if}}
              <li class="submenu-option js-submenu-option">
                <button class="m-icon-button in-menu-main more js-toggle-submenu" aria-label="{{t "Open submenu"}}">
                  <span class="icon-more" aria-hidden="true"></span>
                </button>
                <div class="m-submenu js-submenu">
                  <div class="l-wrapper in-submenu">
                    <section class="m-recent-articles">
                      <h3 class="m-submenu-title in-recent-articles">{{t "Recent articles"}}</h3>
                      {{#get "posts" limit="4" order="published_at desc" as |recent|}}
                        {{#if recent}}
                          <div class="swiper js-recent-slider">
                            <div class="swiper-wrapper">
                              {{#foreach recent}}
                                <div class="swiper-slide">
                                  <a href="{{url}}" class="m-recent-article">
                                    <div class="m-recent-article__picture {{#unless feature_image}}no-picture{{/unless}}">
                                      {{#if feature_image}}
                                        <img src="{{img_url feature_image size="s"}}" loading="lazy" alt="">
                                      {{else}}
                                        <img src="{{asset "images/no-image.png"}}" loading="lazy" alt="">
                                      {{/if}}
                                    </div>
                                    <h3 class="m-recent-article__title js-recent-article-title" title="{{title}}">
                                      {{title}}
                                    </h3>
                                    <span class="m-recent-article__date">{{date published_at timeago="true"}}</span>
                                  </a>
                                </div>
                              {{/foreach}}
                            </div>
                          </div>
                        {{else}}
                          <div class="m-not-found in-recent-articles">{{t "No recent articles found :("}}</div>
                        {{/if}}
                      {{/get}}
                    </section>
                    <section class="m-tags">
                      <h3 class="m-submenu-title">{{t "Tags"}}</h3>
                      {{#get "tags" limit="10"}}
                        <ul>
                          {{#foreach tags}}
                            <li>
                              <a href="{{url}}">{{name}}</a>
                            </li>
                            {{else}}
                              <li class="m-not-found">{{t "No tags found :("}}</li>
                          {{/foreach}}
                        </ul>
                      {{/get}}
                    </section>
                  </div>
                </div>
              </li>
            </ul>
          </nav>
          <div class="m-nav__right">
            <button class="m-icon-button in-menu-main js-open-search" aria-label="{{t "Open search"}}">
              <span class="icon-search" aria-hidden="true"></span>
            </button>
            <div class="m-toggle-darkmode js-tooltip" data-tippy-content="{{t "Toggle dark mode"}}" tabindex="0">
              <label for="toggle-darkmode" class="sr-only">
                {{t "Toggle dark mode"}}
              </label>
              <input id="toggle-darkmode" type="checkbox" class="js-toggle-darkmode">
              <div>
                <span class="icon-moon moon" aria-hidden="true"></span>
                <span class="icon-sunny sun" aria-hidden="true"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  {{#if @site.secondary_navigation}}
    <div id="secondary-navigation-template" style="display: none;">
      {{navigation type="secondary"}}
    </div>
  {{/if}}
</header>
